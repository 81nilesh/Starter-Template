{"ast":null,"code":"// src/notifyManager.ts\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n\n  let notifyFn = callback => {\n    callback();\n  };\n\n  let batchNotifyFn = callback => {\n    callback();\n  };\n\n  let scheduleFn = cb => setTimeout(cb, 0);\n\n  const setScheduler = fn => {\n    scheduleFn = fn;\n  };\n\n  const batch = callback => {\n    let result;\n    transactions++;\n\n    try {\n      result = callback();\n    } finally {\n      transactions--;\n\n      if (!transactions) {\n        flush();\n      }\n    }\n\n    return result;\n  };\n\n  const schedule = callback => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n\n  const batchCalls = callback => {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      schedule(() => {\n        callback(...args);\n      });\n    };\n  };\n\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach(callback => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n\n  const setNotifyFunction = fn => {\n    notifyFn = fn;\n  };\n\n  const setBatchNotifyFunction = fn => {\n    batchNotifyFn = fn;\n  };\n\n  return {\n    batch,\n    batchCalls,\n    schedule,\n    setNotifyFunction,\n    setBatchNotifyFunction,\n    setScheduler\n  };\n}\n\nvar notifyManager = createNotifyManager();\nexport { createNotifyManager, notifyManager };","map":{"version":3,"mappings":";AAYO,SAASA,mBAAT,GAA+B;EACpC,IAAIC,QAA+B,EAAnC;EACA,IAAIC,eAAe,CAAnB;;EACA,IAAIC,WAA4BC,QAAD,IAAc;IAC3CA;EACF,CAFA;;EAGA,IAAIC,gBAAsCD,QAAD,IAA0B;IACjEA;EACF,CAFA;;EAGA,IAAIE,aAAgCC,EAAD,IAAQC,WAAWD,EAAX,EAAe,CAAf,CAA3C;;EAEA,MAAME,eAAgBC,EAAD,IAA0B;IAC7CJ,aAAaI,EAAb;EACF,CAFA;;EAIA,MAAMC,QAAYP,QAAJ,IAA6B;IACzC,IAAIQ,MAAJ;IACAV;;IACA,IAAI;MACFU,SAASR,UAAT;IACF,CAFA,SAEE;MACAF;;MACA,IAAI,CAACA,YAAL,EAAmB;QACjBW;MACF;IACF;;IACA,OAAOD,MAAP;EACF,CAZA;;EAcA,MAAME,WAAYV,QAAD,IAAoC;IACnD,IAAIF,YAAJ,EAAkB;MAChBD,MAAMc,IAAN,CAAWX,QAAX;IACF,CAFA,MAEO;MACLE,WAAW,MAAM;QACfH,SAASC,QAAT;MACD,CAFD;IAGF;EACF,CARA;;EAaA,MAAMY,aACJZ,QADiB,IAES;IAC1B,OAAO,YAAa;MAAA,kCAATa,IAAS;QAATA,IAAS;MAAA;;MAClBH,SAAS,MAAM;QACbV,SAAS,GAAGa,IAAZ;MACD,CAFD;IAGF,CAJA;EAKF,CARA;;EAUA,MAAMJ,QAAQ,MAAY;IACxB,MAAMK,gBAAgBjB,KAAtB;IACAA,QAAQ,EAAR;;IACA,IAAIiB,cAAcC,MAAlB,EAA0B;MACxBb,WAAW,MAAM;QACfD,cAAc,MAAM;UAClBa,cAAcE,OAAd,CAAuBhB,QAAD,IAAc;YAClCD,SAASC,QAAT;UACD,CAFD;QAGD,CAJD;MAKD,CAND;IAOF;EACF,CAZA;;EAkBA,MAAMiB,oBAAqBX,EAAD,IAAwB;IAChDP,WAAWO,EAAX;EACF,CAFA;;EAQA,MAAMY,yBAA0BZ,EAAD,IAA6B;IAC1DL,gBAAgBK,EAAhB;EACF,CAFA;;EAIA,OAAO;IACLC,KADK;IAELK,UAFK;IAGLF,QAHK;IAILO,iBAJK;IAKLC,sBALK;IAMLb;EANK,CAAP;AAQF;;AAGO,IAAMc,gBAAgBvB,qBAAtB","names":["createNotifyManager","queue","transactions","notifyFn","callback","batchNotifyFn","scheduleFn","cb","setTimeout","setScheduler","fn","batch","result","flush","schedule","push","batchCalls","args","originalQueue","length","forEach","setNotifyFunction","setBatchNotifyFunction","notifyManager"],"sources":["/Users/apple/Desktop/Starter Template/client/node_modules/@tanstack/query-core/src/notifyManager.ts"],"sourcesContent":["// TYPES\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\ntype BatchCallsCallback<T extends Array<unknown>> = (...args: T) => void\n\ntype ScheduleFunction = (callback: () => void) => void\n\nexport function createNotifyManager() {\n  let queue: Array<NotifyCallback> = []\n  let transactions = 0\n  let notifyFn: NotifyFunction = (callback) => {\n    callback()\n  }\n  let batchNotifyFn: BatchNotifyFunction = (callback: () => void) => {\n    callback()\n  }\n  let scheduleFn: ScheduleFunction = (cb) => setTimeout(cb, 0)\n\n  const setScheduler = (fn: ScheduleFunction) => {\n    scheduleFn = fn\n  }\n\n  const batch = <T>(callback: () => T): T => {\n    let result\n    transactions++\n    try {\n      result = callback()\n    } finally {\n      transactions--\n      if (!transactions) {\n        flush()\n      }\n    }\n    return result\n  }\n\n  const schedule = (callback: NotifyCallback): void => {\n    if (transactions) {\n      queue.push(callback)\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback)\n      })\n    }\n  }\n\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  const batchCalls = <T extends Array<unknown>>(\n    callback: BatchCallsCallback<T>,\n  ): BatchCallsCallback<T> => {\n    return (...args) => {\n      schedule(() => {\n        callback(...args)\n      })\n    }\n  }\n\n  const flush = (): void => {\n    const originalQueue = queue\n    queue = []\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  const setNotifyFunction = (fn: NotifyFunction) => {\n    notifyFn = fn\n  }\n\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  const setBatchNotifyFunction = (fn: BatchNotifyFunction) => {\n    batchNotifyFn = fn\n  }\n\n  return {\n    batch,\n    batchCalls,\n    schedule,\n    setNotifyFunction,\n    setBatchNotifyFunction,\n    setScheduler,\n  } as const\n}\n\n// SINGLETON\nexport const notifyManager = createNotifyManager()\n"]},"metadata":{},"sourceType":"module"}